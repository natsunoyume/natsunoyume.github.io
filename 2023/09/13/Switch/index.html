<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>交换机协议与配置（一） | 夏梦の小屋</title><meta name="author" content="夏梦"><meta name="copyright" content="夏梦"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="eNSP平台eNSP：华为的网络设备仿真平台（交换机、路由器、防火墙、wifi、电脑） 进入物理交换机配置界面  使用console线：一端连接交换机conslole口，另一端连接计算机USB或com口 计算机安装终端程序Putty、secureCRT、Xshell  基本配置通过 eNSP 组建局域网  ipconfig查看主机IP地址信息 ipconfig &#x2F;all(查看更全的IP地">
<meta property="og:type" content="article">
<meta property="og:title" content="交换机协议与配置（一）">
<meta property="og:url" content="https://github.com/natsunoyume/natsunoyume.github.io/2023/09/13/Switch/index.html">
<meta property="og:site_name" content="夏梦の小屋">
<meta property="og:description" content="eNSP平台eNSP：华为的网络设备仿真平台（交换机、路由器、防火墙、wifi、电脑） 进入物理交换机配置界面  使用console线：一端连接交换机conslole口，另一端连接计算机USB或com口 计算机安装终端程序Putty、secureCRT、Xshell  基本配置通过 eNSP 组建局域网  ipconfig查看主机IP地址信息 ipconfig &#x2F;all(查看更全的IP地">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/illust_106874372_20230405_013728.jpg">
<meta property="article:published_time" content="2023-09-13T14:59:12.000Z">
<meta property="article:modified_time" content="2023-09-13T15:47:15.422Z">
<meta property="article:author" content="夏梦">
<meta property="article:tag" content="网络">
<meta property="article:tag" content="协议">
<meta property="article:tag" content="交换机">
<meta property="article:tag" content="eNSP">
<meta property="article:tag" content="VLAN">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/illust_106874372_20230405_013728.jpg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/natsunoyume/Image/Web/favicon.png"><link rel="canonical" href="https://github.com/natsunoyume/natsunoyume.github.io/2023/09/13/Switch/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '交换机协议与配置（一）',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-09-13 23:47:15'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/Web/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/illust_106874372_20230405_013728.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="夏梦の小屋"><span class="site-name">夏梦の小屋</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">交换机协议与配置（一）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-09-13T14:59:12.000Z" title="发表于 2023-09-13 22:59:12">2023-09-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-09-13T15:47:15.422Z" title="更新于 2023-09-13 23:47:15">2023-09-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="交换机协议与配置（一）"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="eNSP平台"><a href="#eNSP平台" class="headerlink" title="eNSP平台"></a>eNSP平台</h2><p>eNSP：华为的网络设备仿真平台（交换机、路由器、防火墙、wifi、电脑）</p>
<p>进入物理交换机配置界面</p>
<ul>
<li>使用console线：一端连接交换机conslole口，另一端连接计算机USB或com口</li>
<li>计算机安装终端程序Putty、secureCRT、Xshell</li>
</ul>
<h3 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h3><h4 id="通过-eNSP-组建局域网"><a href="#通过-eNSP-组建局域网" class="headerlink" title="通过 eNSP 组建局域网"></a>通过 eNSP 组建局域网</h4><p><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/02/020201.png"></p>
<ul>
<li>ipconfig查看主机IP地址信息</li>
<li>ipconfig &#x2F;all(查看更全的IP地址信息)</li>
<li>Ping  目标主机IP（测试试网络连通性）</li>
</ul>
<h4 id="华为交换机配置视图"><a href="#华为交换机配置视图" class="headerlink" title="华为交换机配置视图"></a>华为交换机配置视图</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;用户视图</span><br><span class="line">&lt;Huawei&gt;system-view （进入系统视图）</span><br><span class="line">[Huawei]系统视图</span><br><span class="line">[Huawei]interface GigabitEthernet 0/0/1（进入接口）</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]接口视图</span><br><span class="line">[Huawei-ospf-1]协议视图</span><br><span class="line">[Huawei]Quit 返回上一视图</span><br><span class="line">[Huawei]return 或ctrl+z(直接返回到用户视图)</span><br></pre></td></tr></table></figure>

<h4 id="命令技巧"><a href="#命令技巧" class="headerlink" title="命令技巧"></a>命令技巧</h4><ul>
<li><code>? </code>获取帮助</li>
<li><code>Tab</code>自动补全</li>
<li>命令简写</li>
<li>上下方向键调用命令历史 </li>
<li>命令不区分大小写</li>
</ul>
<h4 id="基本配置命令"><a href="#基本配置命令" class="headerlink" title="基本配置命令"></a>基本配置命令</h4><ul>
<li><p>查看当前配置信息<br><code>&lt;Huawei&gt;display current-configuration</code><br>空格显示下一屏，回车显示下一行</p>
</li>
<li><p>查看系统版本、交换机型号信息，开机时间<br><code>&lt;Huawei&gt;display version</code></p>
</li>
<li><p>设备重命名<br><code>[Huawei]sysname S1</code> 将设备重命名为S1</p>
</li>
<li><p>保存配置信息<br><code>&lt;Switch1&gt;save</code><br><code>[Y/N]</code>确认保存输入<code>y</code> 回车</p>
</li>
<li><p>重启设备</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;S1&gt;reboot</span><br><span class="line">[Y/N]:提示是否保存</span><br><span class="line">[Y/N]:提示是否重启</span><br></pre></td></tr></table></figure></li>
<li><p>接口的禁用与启用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]interface GigabitEthernet 0/0/2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]shutdown 禁用接口</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]undo shutdown 启用接口</span><br></pre></td></tr></table></figure></li>
<li><p>关闭日志提示<br><code>&lt;Huawei&gt;undo terminal monitor</code></p>
</li>
<li><p>配置console密码（本地访问口令）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]user-interface console 0 进入console口</span><br><span class="line">[Huawei-ui-console0]authentication-mode password 启用密码认证</span><br><span class="line">[Huawei-ui-console0]set authentication password cipher 123 设置密码</span><br><span class="line">[Huawei-ui-console0]return返回用户视图</span><br><span class="line">&lt;Huawei&gt;quit</span><br><span class="line">Please Press ENTER.</span><br><span class="line">Login authentication</span><br><span class="line">Password:输入123 回车</span><br></pre></td></tr></table></figure></li>
<li><p>设置console超时时间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[S2]user-interface console 0</span><br><span class="line">[S2-ui-console0]idle-timeout 1（配置超时时间1分钟）</span><br></pre></td></tr></table></figure></li>
<li><p>恢复出厂默认</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;S1&gt;reset saved-configuration </span><br><span class="line">[Y/N]:Y</span><br><span class="line">&lt;S1&gt;reboot</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：执行重启命令后先输入N不保存，然后输入Y重启</p>
</blockquote>
</li>
<li><p>取消console口令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]user-interface console 0</span><br><span class="line">[Huawei-ui-console0]undo set authentication password</span><br></pre></td></tr></table></figure></li>
<li><p>改变语言模式为中文<br><code>&lt;Huawei&gt;language-mode Chinese</code></p>
</li>
</ul>
<h3 id="远程管理"><a href="#远程管理" class="headerlink" title="远程管理"></a>远程管理</h3><p><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/02/020202.png"></p>
<ul>
<li><p>配置交换机IP地址（管理IP）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view  </span><br><span class="line">[Huawei]interface Vlanif 1 进入vlan1的虚拟接口 </span><br><span class="line">[Huawei-Vlanif1]ip address 192.168.1.100 255.255.255.0 配置IP地址及掩码 </span><br><span class="line">[Huawei-Vlanif1]undo shutdown </span><br></pre></td></tr></table></figure></li>
<li><p>配置远程访问密码 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view</span><br><span class="line">[Huawei]user-interface vty 0 4（进入远程登录配置视图、配置允许5个终端远程管理） </span><br><span class="line">[Huawei-ui-vty0-4]set authentication password cipher 123 配置远程管理密码 </span><br><span class="line">[Huawei-ui-vty0-4]user privilege level 3 设置权限</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：level 3表示管理级</p>
</blockquote>
</li>
<li><p>客户端远程登录被管理的交换机      </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view  </span><br><span class="line">[Huawei]interface Vlanif 1进入vlan1的虚拟接口 </span><br><span class="line">[Huawei-Vlanif1]ip address 192.168.1.10 255.255.255.0配置IP地址及掩码</span><br><span class="line">[Huawei-Vlanif1]undo shutdown </span><br><span class="line"></span><br><span class="line">&lt;Huawei&gt;telnet 192.168.1.100 </span><br><span class="line"></span><br><span class="line">Login authentication </span><br><span class="line">Password:输入密码123 </span><br><span class="line">&lt;Huawei&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：telnet 远程管理协议，端口号23</p>
</blockquote>
</li>
</ul>
<h3 id="路由器配置"><a href="#路由器配置" class="headerlink" title="路由器配置"></a>路由器配置</h3><p><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/02/020203.png"></p>
<ul>
<li>配置路由器接口IP<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view </span><br><span class="line">[Huawei]sysname R1</span><br><span class="line">[R1]interface GigabitEthernet 0/0/0</span><br><span class="line">[R1-GigabitEthernet0/0/0]ip address 192.168.1.254 255.255.255.0</span><br><span class="line">[R1-GigabitEthernet0/0/0]quit</span><br><span class="line">[R1]interface GigabitEthernet 0/0/1</span><br><span class="line">[R1-GigabitEthernet0/0/1]ip address 192.168.2.254 255.255.255.0</span><br></pre></td></tr></table></figure></li>
<li>配置主机IP与网关<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">配置PC1的IP地址：192.168.1.1、网关地址：192.168.1.254</span><br><span class="line">配置PC2的IP地址：192.168.1.2、网关地址：192.168.1.254</span><br><span class="line">配置PC3的IP地址：192.168.2.1、网关地址：192.168.2.254</span><br><span class="line">配置PC4的IP地址：192.168.2.2、网关地址：192.168.2.254</span><br></pre></td></tr></table></figure></li>
<li>测试连通性<br><code>PC1主机 ping  192.168.2.1</code></li>
<li>查看路由表<br><code>&lt;R1&gt;display ip routing-table</code></li>
</ul>
<h2 id="冲突域与广播域"><a href="#冲突域与广播域" class="headerlink" title="冲突域与广播域"></a>冲突域与广播域</h2><p>冲突域：在同一个冲突域中的每一个节点都能收到所有被发送的帧<br>广播域：网络中能接收任一设备发出的广播帧的所有设备的集合<br>冲突域是基于第一层（物理层）<br>广播域是基于第二层（链路层）</p>
<h3 id="冲突域"><a href="#冲突域" class="headerlink" title="冲突域"></a>冲突域</h3><p>在以太网中，两台计算机在同时通信时会发生冲突，那么这个网络就是一个冲突域 (<strong>collision domain</strong>)，导致信号冲突，数据无法被正确转发，工作效率低。<br>如果以太网中各个网段以集线器连接，因为不能避免冲突，所以它们仍然是一个冲突域</p>
<p>为了有效避免冲突，局域网中使用交换机（Switch）来分割冲突域</p>
<p><strong>集线器与交换机的区别</strong></p>
<ul>
<li>集线器(Hub)设备不能识别MAC地址和IP地址，对接收到的数据以广播的形式发送，同一时刻由集线器连接的网络中只能传输一组数据，如果发生冲突则需要重传。它的所有端口为一个冲突域同时也为一个广播域</li>
<li>交换机则是数据链路层的设备，在接收到数据后，通过查找自身系统MAC地址表中的MAC地址与端口对应关系，将数据传送到目的端口。<br>交换机在同一时刻可进行多个端口之间的数据传输，每一端口都是独立的物理网段，连接在端口上的网络设备独自享有全部的带宽。因此，交换机起到了分割冲突域的作用，每一个端口为一个冲突域</li>
</ul>
<h3 id="广播域"><a href="#广播域" class="headerlink" title="广播域"></a>广播域</h3><p>广播是一种信息的传播方式，指网络中的某一设备同时向网络中所有的其它设备发送数据，这个数据所能广播到的范围即为广播域 (<strong>Broadcast Domain</strong>)。广播过多会对局域网造成干扰，导致网络延迟，网络卡顿，严重情况可以造成广播风暴，导致网络瘫痪</p>
<p>路由器工作在网络层，利用不同的IP地址来确定数据转发的目的地址。MAC地址通常由设备硬件出厂自带不能更改。路由器通过IP地址将连接到其端口的设备划分为不同的网络(子网)，每个端口下连接的网络即为一个广播域，广播数据不会扩散到该端口以外，因此路由器隔离了广播域</p>
<ul>
<li>第一层设备（中继器、集线器）不能划分冲突域和广播域。<br>集线器的所有端口为一个冲突域同时也为一个广播域，所以集线器不能分割冲突域与广播域</li>
<li>第二层设备（网桥、第二层交换机）能划分冲突域，不能划分广播域。<br>交换机的所有接口都是一个冲突域，所以交换机可以完美的分割冲突域<br>交换机的所有接口都属于一个广播域，所以交换机默认情况下无法分割广播域</li>
<li>第三层设备（路由器）既能划分冲突域，又能划分广播域。<br>路由器的所有接口都是一个广播域，所以路由器可以分割广播域</li>
</ul>
<h2 id="VLAN"><a href="#VLAN" class="headerlink" title="VLAN"></a>VLAN</h2><p>VLAN（Virtual Local Area Network）即虚拟局域网，是将一个物理的LAN在逻辑上划分成多个广播域的通信技术。</p>
<p>当主机数目较多时会导致冲突严重、广播泛滥、性能显著下降甚至造成网络不可用等问题。通过二层设备实现LAN互连虽然可以解决冲突严重的问题，但仍然不能隔离广播报文和提升网络质量。</p>
<p>VLAN可以把一个LAN划分成多个逻辑的VLAN，每个VLAN是一个广播域，VLAN内的主机间通信就和在一个LAN内一样，而VLAN间则不能直接互通，广播报文就被限制在一个VLAN内。<br><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/02/020204.png"></p>
<p>VLAN的作用</p>
<ul>
<li>限制广播域：广播域被限制在一个VLAN内，节省了带宽，提高了网络处理能力。</li>
<li>安全性：不同VLAN内的报文在传输时相互隔离，即一个VLAN内的用户不能和其它VLAN内的用户直接通信。</li>
<li>提高了网络的健壮性：故障被限制在一个VLAN内，本VLAN内的故障不会影响其他VLAN的正常工作。</li>
<li>灵活构建虚拟工作组：用VLAN可以划分不同的用户到不同的工作组，同一工作组的用户也不必局限于某一固定的物理范围，网络构建和维护更方便灵活。</li>
</ul>
<h3 id="VLAN的接口类型"><a href="#VLAN的接口类型" class="headerlink" title="VLAN的接口类型"></a>VLAN的接口类型</h3><p>现网中属于同一个VLAN的用户可能会被连接在不同的交换机上，且跨越交换机的VLAN可能不止一个，如果需要用户间的互通，就需要交换机间的接口能够同时识别和发送多个VLAN的数据帧。根据接口连接对象以及对收发数据帧处理的不同，当前有VLAN的多种接口类型，以适应不同的连接和组网。</p>
<p>不同厂商对VLAN接口类型的定义可能不同。对于华为设备来说，常见的VLAN接口类型有三种，包括：Access、Trunk和Hybrid。</p>
<p>在一个VLAN交换网络中，以太网数据帧主要有以下两种形式：</p>
<ul>
<li>无标记帧（Untagged帧）：原始的、未加入4字节VLAN标签的帧。</li>
<li>有标记帧（Tagged帧）：加入了4字节VLAN标签的帧。</li>
</ul>
<h4 id="Access"><a href="#Access" class="headerlink" title="Access"></a>Access</h4><p>Access接口一般用于和不能识别Tag的用户终端（如用户主机、服务器）相连，或者不需要区分不同VLAN成员时使用。</p>
<p>Access接口大部分情况只能收发Untagged帧，且只能为Untagged帧添加唯一VLAN的Tag。交换机内部只处理Tagged帧，所以Access接口需要给收到的数据帧添加VLAN Tag，也就必须配置缺省VLAN，该Access接口也就加入了该VLAN。在发送带有Tag的帧前，Access接口会剥离Tag。<br><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/02/020205.jpg"><br><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/02/020206.jpg"></p>
<ul>
<li><p>创建vlan<br>  Vlan的范围：0-4094   4095   0做保留不能使用 从1开始  其实从2开创建</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[sw1]vlan 10             \\创建一个vlan 10</span><br><span class="line">[sw1-vlan10]quit           \\退出</span><br><span class="line">[sw1]vlan batch  20 30 40  \\创建多个不连续的vlan20 30 40 </span><br><span class="line">[sw1]vlan batch  30 to 40   \\创建多个连续的vlan从 30到 40 </span><br><span class="line">[sw1]display  vlan          \\查询valn信息</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除valn</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[sw1]undo vlan 10   \\删除vlan10</span><br><span class="line">[sw1]undo vlan batch 20 30 40 \\批量删除多个vlan20 30 40</span><br><span class="line">Warning: The configurations of the VLAN will be deleted. Continue?[Y/N]:y</span><br><span class="line">Info: This operation may take a few seconds. Please wait for a moment...done.</span><br><span class="line">[sw1]undo vlan batch 31 to 39  \\批量删除多个连续的vlan31到39</span><br><span class="line">Warning: The configurations of the VLAN will be deleted. Continue?[Y/N]:y</span><br><span class="line">Info: This operation may take a few seconds. Please wait for a moment...done.</span><br></pre></td></tr></table></figure>
</li>
<li><p>如何将端口加入valn</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[sw1]vlan 10                      \\创建valn10</span><br><span class="line">[sw1-vlan10]quit                   \\退出</span><br><span class="line">[sw1]interface Ethernet 0/0/2     \\进入0/0/2端口</span><br><span class="line">[sw1-Ethernet0/0/2]port link-type access \\设置端口模式为access模式</span><br><span class="line">[sw1-Ethernet0/0/2]port default vlan 10  \\将端口加入vlan10</span><br><span class="line">[sw1-Ethernet0/0/2]quit                   \\返回</span><br></pre></td></tr></table></figure>
</li>
<li><p>端口组<br>同时将多个端口加入valn 10</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[sw1]port-group 1  \\创建端口组1</span><br><span class="line">[sw1-port-group-1]group-member e0/0/4 to e0/0/7  \\添加端口成员</span><br><span class="line">[sw1-port-group-1]port link-type access  \\对端口组1设置模式为access</span><br><span class="line">[sw1-port-group-1]port default vlan 10  \\将端口组1的加入到vlan10</span><br><span class="line">[sw1-port-group-1]quit \\返回</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[sw1]display vlan       \\显示端口属于那个vlan </span><br><span class="line">[sw1]display port vlan  \\显示端口的PVID值</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="Trunk"><a href="#Trunk" class="headerlink" title="Trunk"></a>Trunk</h4><p>Trunk接口一般用于连接交换机、路由器、AP以及可同时收发Tagged帧和Untagged帧的语音终端。它可以允许多个VLAN的帧带Tag通过，但只允许属于缺省VLAN的帧从该类接口上发出时不带Tag（即剥除Tag）。<br><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/02/020207.jpg"></p>
<ul>
<li><p>配置交换机s2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;undo terminal monitor    \\关闭终端消息提示 </span><br><span class="line">&lt;Huawei&gt;system-view    \\进入系统试图 </span><br><span class="line">[Huawei]sysname sw2    \\ 修改设备名为sw2 </span><br><span class="line">[sw2]vlan batch 1 to 3   \\ 创建vlan 1 2 3</span><br><span class="line">[sw2]interface Ethernet 0/0/1   \\ 进去系统试图 </span><br><span class="line">[sw2-Ethernet0/0/1]port link-type access </span><br><span class="line">[sw2-Ethernet0/0/1]port default vlan 1</span><br><span class="line"> </span><br><span class="line">[sw2]interface Ethernet 0/0/2</span><br><span class="line">[sw2-Ethernet0/0/2]port link-type access </span><br><span class="line">[sw2-Ethernet0/0/2]port default vlan 2</span><br><span class="line"></span><br><span class="line">[sw2]interface Ethernet 0/0/3</span><br><span class="line">[sw2-Ethernet0/0/3]port link-type access </span><br><span class="line">[sw2-Ethernet0/0/3]port default vlan 3</span><br><span class="line"></span><br><span class="line">[sw2]interface Ethernet 0/0/4   \\进去接口0/0/4</span><br><span class="line">[sw2-Ethernet0/0/4]port link-type trunk  \\设置端口模式为trunk</span><br><span class="line">[sw2-Ethernet0/0/4]port trunk allow-pass vlan all  \\允许所有的vlan通过</span><br></pre></td></tr></table></figure></li>
<li><p>配置交换机s3</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;undo terminal monitor </span><br><span class="line">&lt;Huawei&gt;system-view    </span><br><span class="line">[Huawei]sysname sw3</span><br><span class="line">[sw3]vlan batch 1 to 3</span><br><span class="line">[sw3]interface Ethernet 0/0/1</span><br><span class="line">[sw3-Ethernet0/0/1]port link-type access </span><br><span class="line">[sw3-Ethernet0/0/1]port default vlan 1</span><br><span class="line"></span><br><span class="line">[sw3]interface Ethernet 0/0/2</span><br><span class="line">[sw3-Ethernet0/0/2]port link-type access </span><br><span class="line">[sw3-Ethernet0/0/2]port default vlan 2</span><br><span class="line"></span><br><span class="line">[sw3]interface Ethernet 0/0/3</span><br><span class="line">[sw3-Ethernet0/0/3]port link-type access </span><br><span class="line">[sw3-Ethernet0/0/3]port default vlan 3</span><br><span class="line"></span><br><span class="line">[sw3]interface Ethernet 0/0/4  \\进去接口0/0/4</span><br><span class="line">[sw3-Ethernet0/0/4]port link-type trunk  \\设置端口模式为trunk</span><br><span class="line">[sw3-Ethernet0/0/4]port trunk allow-pass vlan all \\允许所有的vlan通过</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>如何给trunk 模式端口修改PVID值 —在工作中不需要修改<br>  主要是为了验证：<br>  在trunk模式中 相同PVID在传输数据时不带标签<br>  不同PVID在传输数据时携带标签</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[sw2]interface Ethernet 0/0/4</span><br><span class="line">[sw2-Ethernet0/0/4]port trunk pvid vlan 2</span><br><span class="line">[sw3]interface Ethernet 0/0/4</span><br><span class="line">[sw3-Ethernet0/0/4]port trunk pvid vlan 2</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果配置错误了怎么删除：</p>
<blockquote>
<p>注意：在修改vlan 端口模式时，然后在进行模式的修改<br>      如果只是模式配置错误了，直接在配置正确的模式既可以覆盖<br>      如果端口的vlan 添加错误，先将端口加入vlan 1，再修改端口的正确模式</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[sw2]interface Ethernet 0/0/2 </span><br><span class="line">[sw2-Ethernet0/0/2]undo port default vlan  取消端口所在的vlan 自动回到vlan 1</span><br><span class="line">[sw2-Ethernet0/0/4]undo port trunk pvid vlan</span><br><span class="line">[sw2-Ethernet0/0/2]port link-type trunk</span><br><span class="line">[sw2-Ethernet0/0/2]port link-type hybrid</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="Hybrid"><a href="#Hybrid" class="headerlink" title="Hybrid"></a>Hybrid</h4><p>Hybrid接口既可以用于连接不能识别Tag的用户终端（如用户主机、服务器）和网络设备（如Hub），也可以用于连接交换机、路由器以及可同时收发Tagged帧和Untagged帧的语音终端、AP。它可以允许多个VLAN的帧带Tag通过，且允许从该类接口发出的帧根据需要配置某些VLAN的帧带Tag（即不剥除Tag）、某些VLAN的帧不带Tag（即剥除Tag）。</p>
<p>Hybrid接口和Trunk接口在很多应用场景下可以通用，但在某些应用场景下，必须使用Hybrid接口。比如在灵活QinQ中，服务提供商网络的多个VLAN的报文在进入用户网络前，需要剥离外层VLAN Tag，此时Trunk接口不能实现该功能，因为Trunk接口只能使该接口缺省VLAN的报文不带VLAN Tag通过。</p>
<ul>
<li>Hybrid模拟Access模式一样脱标签<br><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/02/020208.png"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]sysname sw1</span><br><span class="line">[sw1]vlan 10        </span><br><span class="line"> </span><br><span class="line">[sw1]interface Ethernet 0/0/1         </span><br><span class="line">[sw1-Ethernet0/0/1]port link-type hybrid   </span><br><span class="line">[sw1-Ethernet0/0/1]port hybrid pvid vlan 10   </span><br><span class="line">[sw1-Ethernet0/0/1]port hybrid untagged vlan 10  \\当vlan 10数据通过此接口时脱标签  </span><br><span class="line"></span><br><span class="line">[sw1]interface Ethernet 0/0/2    </span><br><span class="line">[sw1-Ethernet0/0/2]port link-type hybrid  </span><br><span class="line">[sw1-Ethernet0/0/2]port hybrid pvid vlan 10 </span><br><span class="line">[sw1-Ethernet0/0/2]port hybrid untagged vlan 10   \\当vlan 10数据通过此接口时脱标签</span><br><span class="line"> </span><br><span class="line">[sw1]display port vlan    </span><br><span class="line">Port                    Link Type    PVID  Trunk VLAN List</span><br><span class="line">---------------------------------------------------------------</span><br><span class="line">Ethernet0/0/1           hybrid       10    -</span><br><span class="line">Ethernet0/0/2           hybrid       10    -</span><br></pre></td></tr></table></figure>
总结： 当hybrid端口模式模拟access时，要脱掉vlan 标签，脱掉自己的vlan标签，或要让那个数据通过就脱掉那个vlan 的标签；<hr>
</li>
<li>Hybrid模拟Trunk模式一样加标签<br><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/02/020209.png"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">交换机sw2</span><br><span class="line">[sw2]vlan batch 10 20 </span><br><span class="line">[sw2]interface Ethernet 0/0/1  </span><br><span class="line">[sw2-Ethernet0/0/1]port link-type hybrid  </span><br><span class="line">[sw2-Ethernet0/0/1]port hybrid pvid vlan 10  \\修改端口的pvid值为10</span><br><span class="line">[sw2-Ethernet0/0/1]port hybrid untagged vlan 10  \\当vlan 10数据通过此接口时脱标签</span><br><span class="line"></span><br><span class="line">[sw2]interface Ethernet 0/0/2</span><br><span class="line">[sw2-Ethernet0/0/2]port link-type hybrid </span><br><span class="line">[sw2-Ethernet0/0/2]port hybrid pvid vlan 20   \\修改端口的pvid值为20</span><br><span class="line">[sw2-Ethernet0/0/2]port hybrid untagged vlan 20   \\当vlan 20数据通过此接口时脱标签</span><br><span class="line"></span><br><span class="line">[sw2]interface Ethernet 0/0/3</span><br><span class="line">[sw2-Ethernet0/0/3]port link-type hybrid</span><br><span class="line">[sw2-Ethernet0/0/3]port hybrid tagged vlan 10 20   \\当vlan 20 10数据通过此接口时加标签</span><br><span class="line"></span><br><span class="line">交换机sw3</span><br><span class="line">[sw3]vlan batch 10 20 </span><br><span class="line">[sw3]interface Ethernet 0/0/1</span><br><span class="line">[sw3-Ethernet0/0/1]port link-type hybrid </span><br><span class="line">[sw3-Ethernet0/0/1]port hybrid pvid vlan 10   \\修改端口的pvid值为10</span><br><span class="line">[sw3-Ethernet0/0/1]port hybrid untagged vlan 10   \\当vlan 10数据通过此接口时脱标签</span><br><span class="line"> </span><br><span class="line">[sw3]interface Ethernet 0/0/2</span><br><span class="line">[sw3-Ethernet0/0/2]port link-type hybrid </span><br><span class="line">[sw3-Ethernet0/0/2]port hybrid pvid  vlan  20   \\修改端口的pvid值为20</span><br><span class="line">[sw3-Ethernet0/0/2]port hybrid untagged vlan 20  \\当vlan 20数据通过此接口时脱标签</span><br><span class="line"> </span><br><span class="line">[sw3]interface Ethernet 0/0/3</span><br><span class="line">[sw3-Ethernet0/0/3]port link-type hybrid    \\设置端口模式为hybrid</span><br><span class="line">[sw3-Ethernet0/0/3]port hybrid tagged vlan 10 20  \\当vlan 20 10数据通过此接口时加标签</span><br></pre></td></tr></table></figure>
<hr>
</li>
<li>Hybrid模式（默认）手动配置<br><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/02/020210.png"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">交换机SW4</span><br><span class="line">[Huawei]sysname sw4</span><br><span class="line">[sw4]vlan batch 5 10 50</span><br><span class="line"></span><br><span class="line">[sw4]interface Ethernet 0/0/1</span><br><span class="line">[sw4-Ethernet0/0/1]port link-type hybrid </span><br><span class="line">[sw4-Ethernet0/0/1]port hybrid pvid vlan 5    \\修改端口的pvid值为5</span><br><span class="line">[sw4-Ethernet0/0/1]port hybrid untagged vlan 5 50   \\当vlan 5 10数据通过此接口时脱标签</span><br><span class="line"></span><br><span class="line">[sw4]interface Ethernet 0/0/2 </span><br><span class="line">[sw4-Ethernet0/0/2]port link-type hybrid</span><br><span class="line">[sw4-Ethernet0/0/2]port hybrid pvid vlan 10   \\修改端口的pvid值为10</span><br><span class="line">[sw4-Ethernet0/0/2]port hybrid untagged vlan 10 50  \\当vlan 10 50数据通过此接口时脱标签</span><br><span class="line"></span><br><span class="line">[sw4]interface Ethernet 0/0/3</span><br><span class="line">[sw4-Ethernet0/0/3]port link-type hybrid </span><br><span class="line">[sw4-Ethernet0/0/3]port hybrid tagged vlan 5 10 50 \\当vlan 5 10 50数据通过此接口时加标签</span><br><span class="line"></span><br><span class="line">交换机SW5</span><br><span class="line">[Huawei]sysname sw4</span><br><span class="line">[sw5]vlan batch 5 10 50 </span><br><span class="line"></span><br><span class="line">[sw5]interface Ethernet 0/0/1 </span><br><span class="line">[sw5-Ethernet0/0/1]port link-type hybrid</span><br><span class="line">[sw5-Ethernet0/0/1]port hybrid pvid vlan 50  \\修改端口的pvid值为50</span><br><span class="line">[sw5-Ethernet0/0/1]port hybrid untagged vlan 50 5 10  \\当vlan 5 10 50数据通过此接口时脱标签</span><br><span class="line"></span><br><span class="line">[sw5]interface Ethernet 0/0/2 </span><br><span class="line">[sw5-Ethernet0/0/2]port link-type hybrid</span><br><span class="line">[sw5-Ethernet0/0/2]port hybrid tagged vlan 5 10 50  \\当vlan 5 10 50数据通过此接口时加标签</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<ul>
<li><code>Access</code>   端口同时只能属于一个vlan  公有的 任何厂商的交换机都支持此模式</li>
<li><code>Trunk</code>    端口同时可以属于多个vlan  公有的 任何厂商的交换机都支持此模式</li>
<li><code>Hybrid</code>   华为交换机接口默认的模式   混合模式  华为设备私有<br>  端口即可以像access模式一样同时只能属于一个vlan，也可以像trunk 一样同时属于多个vlan<br>既可以像access 一样在发送数据时去掉vlan 标签<br>  也可以像trunk 一样在发送数据时携带vlan 标签</li>
<li>加标签：<code>tagged ID</code>   一般情况下连接交换机设备时使用</li>
<li>脱标签：<code>untagged ID</code>  一般情况下连接终端设备时使用</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://github.com/natsunoyume/natsunoyume.github.io">夏梦</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://github.com/natsunoyume/natsunoyume.github.io/2023/09/13/Switch/">https://github.com/natsunoyume/natsunoyume.github.io/2023/09/13/Switch/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://github.com/natsunoyume/natsunoyume.github.io" target="_blank">夏梦の小屋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%BD%91%E7%BB%9C/">网络</a><a class="post-meta__tags" href="/tags/%E5%8D%8F%E8%AE%AE/">协议</a><a class="post-meta__tags" href="/tags/%E4%BA%A4%E6%8D%A2%E6%9C%BA/">交换机</a><a class="post-meta__tags" href="/tags/eNSP/">eNSP</a><a class="post-meta__tags" href="/tags/VLAN/">VLAN</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/illust_106874372_20230405_013728.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/09/13/Switch-2/" title="交换机协议与配置（二）"><img class="cover" src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/20230703_005631.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">交换机协议与配置（二）</div></div></a></div><div class="next-post pull-right"><a href="/2023/09/12/OSI/" title="OSI &amp; TCP/IP"><img class="cover" src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/yande.re%201112197%20animal_ears%20hololive%20jimmy_madomagi%20minato_aqua%20nekomimi%20pantyhose%20tail.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">OSI &amp; TCP/IP</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/09/13/Switch-2/" title="交换机协议与配置（二）"><img class="cover" src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/20230703_005631.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-13</div><div class="title">交换机协议与配置（二）</div></div></a></div><div><a href="/2023/09/13/Switch-3/" title="交换机协议与配置（三）"><img class="cover" src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/97911234_p0.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-13</div><div class="title">交换机协议与配置（三）</div></div></a></div><div><a href="/2023/09/25/Router/" title="路由器协议与配置（一）"><img class="cover" src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/Konachan.com%20-%20359293%20bell%20cake%20doge_onion%20dress%20elbow_gloves%20elysia_(honkai_impact)%20food%20fruit%20gloves%20honkai_impact%20honkai_(series)%20long_hair%20nopan%20pink_hair%20purple_eyes.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-25</div><div class="title">路由器协议与配置（一）</div></div></a></div><div><a href="/2023/09/12/OSI/" title="OSI &amp; TCP&#x2F;IP"><img class="cover" src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/yande.re%201112197%20animal_ears%20hololive%20jimmy_madomagi%20minato_aqua%20nekomimi%20pantyhose%20tail.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-12</div><div class="title">OSI &amp; TCP&#x2F;IP</div></div></a></div><div><a href="/2023/09/25/Router-3/" title="路由器协议与配置（三）"><img class="cover" src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/illust_97032057_20230730_145910.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-25</div><div class="title">路由器协议与配置（三）</div></div></a></div><div><a href="/2023/09/25/Router-4/" title="路由器协议与配置（四）"><img class="cover" src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/illust_91501751_20220221_134455.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-25</div><div class="title">路由器协议与配置（四）</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/Web/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">夏梦</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><a id="card-info-btn" href="https://github.com/natsunoyume"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/natsunoyume" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#eNSP%E5%B9%B3%E5%8F%B0"><span class="toc-number">1.</span> <span class="toc-text">eNSP平台</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">1.1.</span> <span class="toc-text">基本配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-eNSP-%E7%BB%84%E5%BB%BA%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">1.1.1.</span> <span class="toc-text">通过 eNSP 组建局域网</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8E%E4%B8%BA%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AE%E8%A7%86%E5%9B%BE"><span class="toc-number">1.1.2.</span> <span class="toc-text">华为交换机配置视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%8A%80%E5%B7%A7"><span class="toc-number">1.1.3.</span> <span class="toc-text">命令技巧</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.4.</span> <span class="toc-text">基本配置命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.</span> <span class="toc-text">远程管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">1.3.</span> <span class="toc-text">路由器配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%B2%E7%AA%81%E5%9F%9F%E4%B8%8E%E5%B9%BF%E6%92%AD%E5%9F%9F"><span class="toc-number">2.</span> <span class="toc-text">冲突域与广播域</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%B2%E7%AA%81%E5%9F%9F"><span class="toc-number">2.1.</span> <span class="toc-text">冲突域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E5%9F%9F"><span class="toc-number">2.2.</span> <span class="toc-text">广播域</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VLAN"><span class="toc-number">3.</span> <span class="toc-text">VLAN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#VLAN%E7%9A%84%E6%8E%A5%E5%8F%A3%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.1.</span> <span class="toc-text">VLAN的接口类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Access"><span class="toc-number">3.1.1.</span> <span class="toc-text">Access</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Trunk"><span class="toc-number">3.1.2.</span> <span class="toc-text">Trunk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hybrid"><span class="toc-number">3.1.3.</span> <span class="toc-text">Hybrid</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/09/25/Router-7/" title="路由器协议与配置（七）"><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/Konachan.com%20-%20271521%20animal%20atdan%20barefoot%20bird%20breasts%20brown_eyes%20brown_hair%20butterfly%20cleavage%20flowers%20forest%20grass%20green%20long_hair%20original%20shirt%20signed%20tree.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="路由器协议与配置（七）"/></a><div class="content"><a class="title" href="/2023/09/25/Router-7/" title="路由器协议与配置（七）">路由器协议与配置（七）</a><time datetime="2023-09-25T11:33:04.000Z" title="发表于 2023-09-25 19:33:04">2023-09-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/25/Router-6/" title="路由器协议与配置（六）"><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/Konachan.com%20-%20342260%20amane_kanata%20angel%20boots%20bow%20chihiro_ayaka%20computer%20game_console%20garter%20gray_hair%20halo%20hololive%20kneehighs%20purple_eyes%20short_hair%20skirt%20socks%20wings.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="路由器协议与配置（六）"/></a><div class="content"><a class="title" href="/2023/09/25/Router-6/" title="路由器协议与配置（六）">路由器协议与配置（六）</a><time datetime="2023-09-25T11:31:07.000Z" title="发表于 2023-09-25 19:31:07">2023-09-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/25/Router-5/" title="路由器协议与配置（五）"><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/illust_91458860_20220322_003350.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="路由器协议与配置（五）"/></a><div class="content"><a class="title" href="/2023/09/25/Router-5/" title="路由器协议与配置（五）">路由器协议与配置（五）</a><time datetime="2023-09-25T11:28:55.000Z" title="发表于 2023-09-25 19:28:55">2023-09-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/25/Router-4/" title="路由器协议与配置（四）"><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/illust_91501751_20220221_134455.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="路由器协议与配置（四）"/></a><div class="content"><a class="title" href="/2023/09/25/Router-4/" title="路由器协议与配置（四）">路由器协议与配置（四）</a><time datetime="2023-09-25T11:25:25.000Z" title="发表于 2023-09-25 19:25:25">2023-09-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/25/Router-3/" title="路由器协议与配置（三）"><img src="https://cdn.jsdelivr.net/gh/natsunoyume/Image/img/top-image/illust_97032057_20230730_145910.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="路由器协议与配置（三）"/></a><div class="content"><a class="title" href="/2023/09/25/Router-3/" title="路由器协议与配置（三）">路由器协议与配置（三）</a><time datetime="2023-09-25T11:21:37.000Z" title="发表于 2023-09-25 19:21:37">2023-09-25</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 By 夏梦</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>